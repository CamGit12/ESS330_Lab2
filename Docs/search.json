[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ESS330 Lab 2 Exercises",
    "section": "",
    "text": "library(dplyr)\n\n\n#1-Load and Describe \nlibrary(readr)\nsetwd(\"C:/Users/laxca/Softwares/Git/ESS330_Lab2/Data\")\ntree_dat &lt;- read_csv(\"tree_dat.csv\")\nglimpse(tree_dat)\n\nRows: 131,386\nColumns: 8\n$ treeID  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ standID &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ stand   &lt;chr&gt; \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A…\n$ year    &lt;dbl&gt; 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 19…\n$ species &lt;chr&gt; \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\"…\n$ age     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,…\n$ inc     &lt;dbl&gt; 0.930, 0.950, 0.985, 0.985, 0.715, 0.840, 0.685, 0.940, 1.165,…\n$ rad_ib  &lt;dbl&gt; 10.78145, 11.73145, 12.71645, 13.70145, 14.41645, 15.25645, 15…\n\n\nThis is a dataframe of a forest with records of trees, including their unique ID, their stand ID, the statistics of each tree.\n\n#2-count the number of entries for Stand 1 in the \"standID\" column\nsum(tree_dat$standID == 1)\n\n[1] 979\n\n\nThere are 979 trees in Stand 1.\n\n#3-Count ABBA and PIST\nsum(tree_dat$species == \"ABBA\" | tree_dat$species == \"PIST\")\n\n[1] 17221\n\n\nThere are 17,221 ABBA and PIST trees.\n\n#4-Sum trees older than 200 years old in last year\nsum(tree_dat$age &gt; 200 & tree_dat$year == 2007)\n\n[1] 7\n\n\nThere are 7 trees older than 200 years old that were found in the last year of the dataset.\n\n#5-Oldest tree\ntree_dat %&gt;% slice_max(order_by = age, n = 1)\n\n# A tibble: 1 × 8\n  treeID standID stand  year species   age   inc rad_ib\n   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1     24       2 A2     2007 PIRE      269  0.37   309.\n\n\nThe oldest tree is 269 years old.\n\n#6-oldest 5 trees in 2001\ntree_dat %&gt;% filter(year == 2001) %&gt;%\n  slice_max(order_by = age, n = 5)\n\n# A tibble: 5 × 8\n  treeID standID stand  year species   age   inc rad_ib\n   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1     24       2 A2     2001 PIRE      263 0.21    307.\n2     25       2 A2     2001 PIRE      259 0.28    156.\n3   1595      24 F1     2001 FRNI      212 0.579   156.\n4   1598      24 F1     2001 FRNI      206 0.394   130.\n5   1712      26 F3     2001 FRNI      206 0.168   154.\n\n\nThe oldest 5 trees from 2001 are 263, 259, 212, and two trees that are 2006 years old.\n\n#7- Using slice_sample, how many trees are in a 30% sample of those recorded in 2002?\ntree_dat %&gt;% filter(year == 2002) %&gt;% slice_sample(prop = 0.3) %&gt;% nrow()\n\n[1] 687\n\n\nThere are 687 tress from 2002 that would be in that sample.\n\n#8- Filter all trees in stand 5 in 2007. Sort this subset by descending radius at breast height (rad_ib) and use slice_head() to get the top three trees. Report the tree IDs\ntree_dat %&gt;% filter(standID == 5 & year == 2007) %&gt;% arrange(desc(rad_ib)) %&gt;% slice_head(n = 3) %&gt;% select(treeID)\n\n# A tibble: 3 × 1\n  treeID\n   &lt;dbl&gt;\n1    128\n2    157\n3    135\n\n\nThe highest radius trees from stand 5, from 2007, are trees 128, 157, and 135.\n\n#9-reduce dataset\ntree_dat %&gt;% select(treeID, standID, year, rad_ib) %&gt;% filter(standID == 3 & year == 2007) %&gt;% slice_min(order_by = rad_ib, n = 3)\n\n# A tibble: 3 × 4\n  treeID standID  year rad_ib\n   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1     50       3  2007   47.4\n2     56       3  2007   48.4\n3     36       3  2007   54.9\n\n\nThe smallest three trees from 2007 in stand 3 were tree 50, 56 and 36.\n\n#10-Remove stand column\ntree_dat %&gt;% select(-standID) %&gt;% glimpse()\n\nRows: 131,386\nColumns: 7\n$ treeID  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ stand   &lt;chr&gt; \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A…\n$ year    &lt;dbl&gt; 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 19…\n$ species &lt;chr&gt; \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\"…\n$ age     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,…\n$ inc     &lt;dbl&gt; 0.930, 0.950, 0.985, 0.985, 0.715, 0.840, 0.685, 0.940, 1.165,…\n$ rad_ib  &lt;dbl&gt; 10.78145, 11.73145, 12.71645, 13.70145, 14.41645, 15.25645, 15…\n\n\nStand column was removed.\n\n#11- remove columns with ID in the name\ntree_dat %&gt;% select(contains(\"ID\")) %&gt;% glimpse()\n\nRows: 131,386\nColumns: 2\n$ treeID  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ standID &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n\n\nStandID and treeID are the ones we could remove.\n\n#12- find columns with ID and Stand\ntree_dat %&gt;% select(contains(\"ID\") | contains(\"stand\")) %&gt;% glimpse()\n\nRows: 131,386\nColumns: 3\n$ treeID  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ standID &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ stand   &lt;chr&gt; \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A…\n\n\nNow we have the last two columns, as well as the “Stand” column.\n\n#13-rename rad_inc\ntree_dat &lt;- tree_dat %&gt;% rename(rad_mm = rad_ib, inc_mm = inc)\n\nThe column names were fixed to include the units.\n\n#14-mean BA_m2 of POTR in 2007\ntree_dat &lt;- tree_dat %&gt;% mutate(DBH = rad_mm * .1) %&gt;% mutate(BA_m2 = 0.00007854 * DBH^2) %&gt;% glimpse()\n\nRows: 131,386\nColumns: 10\n$ treeID  &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ standID &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ stand   &lt;chr&gt; \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A1\", \"A…\n$ year    &lt;dbl&gt; 1960, 1961, 1962, 1963, 1964, 1965, 1966, 1967, 1968, 1969, 19…\n$ species &lt;chr&gt; \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\", \"ABBA\"…\n$ age     &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18,…\n$ inc_mm  &lt;dbl&gt; 0.930, 0.950, 0.985, 0.985, 0.715, 0.840, 0.685, 0.940, 1.165,…\n$ rad_mm  &lt;dbl&gt; 10.78145, 11.73145, 12.71645, 13.70145, 14.41645, 15.25645, 15…\n$ DBH     &lt;dbl&gt; 1.078145, 1.173145, 1.271645, 1.370145, 1.441645, 1.525645, 1.…\n$ BA_m2   &lt;dbl&gt; 9.129463e-05, 1.080922e-04, 1.270055e-04, 1.474429e-04, 1.6323…\n\ntree_dat %&gt;% filter(species == \"POTR\" & year == 2007) %&gt;% summarize(mean(BA_m2))\n\n# A tibble: 1 × 1\n  `mean(BA_m2)`\n          &lt;dbl&gt;\n1       0.00924\n\n\nDBH was computed and BA was computed as well (in meters squared.) The mean BA_m2 was 369.6619.\n\n#15- make a column to add boolean T/F if established 5+ yr\ntree_dat &lt;- tree_dat %&gt;% mutate(established = if_else(age &gt; 5, TRUE, FALSE))\n\nThe column was made.\n\n#16-make new column for classifying each tree into proper DBH_class and limit dataset to 2007 and report the number of each class with count \ntree_dat &lt;- tree_dat %&gt;% mutate(DBH_class = case_when(DBH &lt; 2.5 ~ \"seedling\", DBH &lt; 10 ~ \"sapling\", DBH &lt; 30 ~ \"pole\", TRUE ~ \"sawlog\"))\n\nTrees were classified by provided categorization statistics.\n\n#17-compute mean and SD dbh in c, fro all 2007 trees \ntree_dat %&gt;% filter(year == 2007) %&gt;% summarize(mean(DBH), sd(DBH))\n\n# A tibble: 1 × 2\n  `mean(DBH)` `sd(DBH)`\n        &lt;dbl&gt;     &lt;dbl&gt;\n1        8.05      3.07\n\n\nThe mean DBH of the 2007 tree data illustrates that the average tree was roughly 8 cm. The standard deviation of these trees shows that 75 percent of the trees, if the distribution is normal, is roughly 3 cm more or less than the average DBH. With these two stats, we see that the majority of the trees have a dbh within this range and that the average tree is 8cm DBH.\n\n#18-Compute the per species mean tree age using only those ages recorded in 2003. Identify the three species with the oldest mean age.\ntree_dat %&gt;% filter(year == 2003) %&gt;% group_by(species) %&gt;% summarize(mean_age = mean(age)) %&gt;% arrange(desc(mean_age))\n\n# A tibble: 15 × 2\n   species mean_age\n   &lt;chr&gt;      &lt;dbl&gt;\n 1 THOC       127. \n 2 FRNI        83.1\n 3 PIST        73.3\n 4 POGR        73.0\n 5 BEPA        72.8\n 6 LALA        71.5\n 7 ACSA        70.2\n 8 PIMA        64.1\n 9 QURU        64.0\n10 ACRU        61.7\n11 PIRE        51.3\n12 POTR        48.8\n13 PIGL        42.3\n14 PIBA        38.5\n15 ABBA        32.5\n\ntree_dat %&gt;% filter(year == 2003) %&gt;% group_by(species) %&gt;% summarize(mean_age = mean(age)) %&gt;% arrange(desc(mean_age)) %&gt;% slice_head(n = 3)\n\n# A tibble: 3 × 2\n  species mean_age\n  &lt;chr&gt;      &lt;dbl&gt;\n1 THOC       127. \n2 FRNI        83.1\n3 PIST        73.3\n\n\nThe mean tree age from 2003 was computed, including the three with the oldest mean age (Thuja occidentalis, Fraxinus nigra, Pinus strobus)\n\n#19- In a single summarize call, find the number of unique years with records in the data set along with the first and last year recorded?\ntree_dat %&gt;% summarize(unique_years = n_distinct(year), first_year = min(year), last_year = max(year))\n\n# A tibble: 1 × 3\n  unique_years first_year last_year\n         &lt;int&gt;      &lt;dbl&gt;     &lt;dbl&gt;\n1          111       1897      2007\n\n\nThe number of unique years with records in the dataset was 111, and the first year was 1897, the last was 2007.\n\n#20-Determine the stands with the largest number of unique years recorded. Report all stands with largest (or tied with the largest) temporal record.\n\ntree_dat %&gt;% group_by(standID) %&gt;% summarize(unique_years = n_distinct(year)) %&gt;% filter(unique_years == max(unique_years))\n\n# A tibble: 5 × 2\n  standID unique_years\n    &lt;dbl&gt;        &lt;int&gt;\n1       1          111\n2      15          111\n3      16          111\n4      17          111\n5      24          111\n\n\nThe stands with the largest number of unique years recorded were 1, 15, 16, 17, and 24. All of these had the same number of unique years, 111.\n\n#Final\n\n#Compute annual DBH growth per tree \ntree_dat &lt;- tree_dat %&gt;%\n  arrange(treeID, year) %&gt;%\n  group_by(treeID) %&gt;%\n  mutate(dbh_growth = DBH - lag(DBH)) %&gt;%\n  ungroup()\n\n#trees with at least a 10yr growth record\ntree_dat_filtered &lt;- tree_dat %&gt;%\n  group_by(treeID) %&gt;%\n  filter(n() &gt;= 10)\n\n#mean and standard deviation of DBH growth by species\nspecies_growth_stats &lt;- tree_dat_filtered %&gt;%\n  group_by(species) %&gt;%\n  summarise(mean_growth = mean(dbh_growth, na.rm = TRUE),\n            sd_growth = sd(dbh_growth, na.rm = TRUE)) %&gt;%\n  arrange(desc(mean_growth))\n\n# fastest- and slowest-growing species\nfastest_species &lt;- species_growth_stats %&gt;% slice_max(mean_growth, n = 3)\nslowest_species &lt;- species_growth_stats %&gt;% slice_min(mean_growth, n = 3)\n\n# Display results\n\nprint(fastest_species)\n\n# A tibble: 3 × 3\n  species mean_growth sd_growth\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 PIRE          0.179     0.129\n2 POTR          0.165     0.109\n3 PIBA          0.163     0.123\n\nprint(slowest_species)\n\n# A tibble: 3 × 3\n  species mean_growth sd_growth\n  &lt;chr&gt;         &lt;dbl&gt;     &lt;dbl&gt;\n1 LALA         0.0749    0.0564\n2 THOC         0.0765    0.0455\n3 QURU         0.0838    0.0434\n\n\nThe three fastest growing species by mean growth rates, by USDA species codes, were PIRE, POTR and PIBA. The slowest were LALA&lt; THOC, and QURU.\nImage of fastest growing species:\n\n\n\nPinus Resinosa"
  }
]